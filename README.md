AWS Infrastructure Automation: VPC & EKS Cluster
–¶–µ–π –ø—Ä–æ—î–∫—Ç —Ä–µ–∞–ª—ñ–∑—É—î —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–æ—ó —Ç–∞ –≤—ñ–¥–º–æ–≤–æ—Å—Ç—ñ–π–∫–æ—ó —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –≤ AWS –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Terraform. –û—Å–Ω–æ–≤–Ω–∞ –º–µ—Ç–∞ ‚Äî —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–µ—Ä–µ–∂–µ–≤–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (VPC) —Ç–∞ –∫–µ—Ä–æ–≤–∞–Ω–æ–≥–æ Kubernetes-–∫–ª–∞—Å—Ç–µ—Ä–∞ (EKS) –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è ML-—Å–µ—Ä–≤—ñ—Å—ñ–≤.

–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É
–ü—Ä–æ—î–∫—Ç –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π –∑–∞ –º–æ–¥—É–ª—å–Ω–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–æ–º, —â–æ –∑–∞–±–µ–∑–ø–µ—á—É—î –ø–µ—Ä–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–æ–¥—É —Ç–∞ —á—ñ—Ç–∫–µ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ:

–ú–æ–¥—É–ª—å VPC: –°—Ç–≤–æ—Ä—é—î —ñ–∑–æ–ª—å–æ–≤–∞–Ω—É –º–µ—Ä–µ–∂—É –∑ –ø—É–±–ª—ñ—á–Ω–∏–º–∏ —Ç–∞ –ø—Ä–∏–≤–∞—Ç–Ω–∏–º–∏ –ø—ñ–¥–º–µ—Ä–µ–∂–∞–º–∏, NAT Gateway —Ç–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—é –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—î—é.

–ú–æ–¥—É–ª—å EKS: –†–æ–∑–≥–æ—Ä—Ç–∞—î Kubernetes-–∫–ª–∞—Å—Ç–µ—Ä —É —Å—Ç–≤–æ—Ä–µ–Ω—ñ–π VPC –∑ –¥–≤–æ–º–∞ –æ–∫—Ä–µ–º–∏–º–∏ –≥—Ä—É–ø–∞–º–∏ –≤—É–∑–ª—ñ–≤ (Node Groups) –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å (CPU —Ç–∞ GPU).

üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É
Plaintext

eks-vpc-cluster/
‚îú‚îÄ‚îÄ main.tf              # –ö–æ—Ä–µ–Ω–µ–≤–∏–π —Ñ–∞–π–ª –¥–ª—è –≤–∏–∫–ª–∏–∫—É –º–æ–¥—É–ª—ñ–≤
‚îú‚îÄ‚îÄ variables.tf         # –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ
‚îú‚îÄ‚îÄ outputs.tf           # –ì–ª–æ–±–∞–ª—å–Ω—ñ –≤–∏—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ
‚îú‚îÄ‚îÄ terraform.tf         # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤
‚îú‚îÄ‚îÄ backend.tf           # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è S3 Backend
‚îú‚îÄ‚îÄ vpc/                 # –ú–æ–¥—É–ª—å –º–µ—Ä–µ–∂—ñ
‚îÇ   ‚îú‚îÄ‚îÄ main.tf
‚îÇ   ‚îú‚îÄ‚îÄ variables.tf
‚îÇ   ‚îú‚îÄ‚îÄ outputs.tf
‚îÇ   ‚îú‚îÄ‚îÄ terraform.tf
‚îÇ   ‚îî‚îÄ‚îÄ backend.tf
‚îî‚îÄ‚îÄ eks/                 # –ú–æ–¥—É–ª—å Kubernetes
    ‚îú‚îÄ‚îÄ main.tf
    ‚îú‚îÄ‚îÄ variables.tf
    ‚îú‚îÄ‚îÄ outputs.tf
    ‚îú‚îÄ‚îÄ terraform.tf
    ‚îî‚îÄ‚îÄ backend.tf
üöÄ –ö—Ä–æ–∫–∏ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
1. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞
–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —É –≤–∞—Å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ Terraform —Ç–∞ AWS CLI. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ AWS –∞–∫–∞—É–Ω—Ç–∞ (–∞–±–æ —ñ–º—ñ—Ç–∞—Ü—ñ—é –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞).

2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–µ—Ä–µ–∂—ñ (VPC)
Bash

cd vpc/
terraform init
terraform apply -auto-approve
3. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª–∞—Å—Ç–µ—Ä–∞ (EKS)
–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è VPC:

Bash

cd ../eks/
terraform init
terraform apply -auto-approve
üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
–û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó kubectl
Bash

aws eks --region eu-central-1 update-kubeconfig --name mlops-eks-cluster
–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—É–∑–ª—ñ–≤ –∫–ª–∞—Å—Ç–µ—Ä–∞
–ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏ kubectl get nodes, –º–∏ –±–∞—á–∏–º–æ –¥–≤—ñ —Ä–æ–±–æ—á—ñ –≥—Ä—É–ø–∏ –≤—É–∑–ª—ñ–≤ (Node Groups):

Plaintext

NAME                                            STATUS   ROLES    AGE   VERSION
ip-10-0-1-12.eu-central-1.compute.internal      Ready    <none>   5m    v1.27.x
ip-10-0-2-24.eu-central-1.compute.internal      Ready    <none>   5m    v1.27.x
–ü—Ä–∏–º—ñ—Ç–∫–∞: –û–¥–Ω–∞ –≥—Ä—É–ø–∞ –≤—É–∑–ª—ñ–≤ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –ø—ñ–¥ CPU (t3.micro), —ñ–Ω—à–∞ ‚Äî –ø—ñ–¥ GPU –∑–∞–¥–∞—á—ñ (–∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º–∏ labels).

üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫
IaC: Terraform 1.x

–•–º–∞—Ä–Ω–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä: AWS

–ú–æ–¥—É–ª—ñ: * terraform-aws-modules/vpc/aws

terraform-aws-modules/eks/aws

Backend: S3 –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å—Ç–∞–Ω—É (state)
